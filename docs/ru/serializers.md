# Сериалайзеры и редакция

[English](../en/serializers.md) | Русский

Сериалайзеры изменяют или удаляют отдельные поля до того, как запись попадёт в транспорт.

## Определение сериалайзеров

```ts
// Определяем карту сериализаторов.
const serializers = {
  // Сериализатор "password" удаляет поле "password" из записи лога.
  password(context) {
    context.redact();
  },
  // Сериализатор "token" заменяет поле "token" на отредактированное значение.
  token(context) {
    const value = String(context.value);
    context.replace("***");
  },
};

// Создаем коннектор с определенными сериализаторами.
const connector = createConnector({ serializers });
```

## Контекст сериалайзера

Доступны поля:

- record — полная запись
- key — редактируемый ключ
- value — текущее значение
- redact() — удалить ключ
- replace(next) — заменить значение

## Рекомендации

- Держите логику синхронной и лёгкой.
- Используйте хуки до сериализации, чтобы вынести чувствительные данные в предсказуемые ключи.
- При расследовании проблем опирайтесь на счётчики ошибок сериалайзеров в диагностике.

## Тесты

В tests/plugins/serializers/index.test.ts представлены базовые сценарии. Добавляйте кейсы для новых ключей и сложных трансформаций.
